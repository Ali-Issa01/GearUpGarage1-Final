<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Services - GearUpGarage</title>

  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  
  <!-- Custom CSS -->
  <link rel="stylesheet" href="assets/css/style.css">

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Chakra+Petch:wght@400;600;700&family=Mulish&display=swap"
    rel="stylesheet">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

    

    <!-- Material Icons -->
    <link rel="stylesheet"
    href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@40,600,0,0" />

    <!-- Custom CSS -->
    <link rel="stylesheet" href="services.css">

    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js" defer></script>
</head>

<body>
    <header class="header">
  <div class="container">
    <a href="index.html" class="logo">
      <img src="./assets/images/logo.png" alt="Autofix Logo">
    </a>
    <nav class="navbar">
      <a href="index.html" class="navbar-link">Home</a>
      <a href="index.html" class="navbar-link">About</a>
      <a href="services.html" class="navbar-link active">Services</a>
      <a href="carMarket.html" class="navbar-link">Car Market</a>
      
    </nav>
    <div id="authButtons">
      <a href="login.html" class="btn btn-primary">
        <span>Login</span>
        <span class="material-symbols-rounded">arrow_forward</span>
      </a>
    </div>
  </div>
</header>
      


  <!-- Header -->
  <section class="text-center py-4">
    <h1 id="section-title">Our Services</h1>
    <p class="section-subtitle">Top-notch services tailored for your vehicle's needs</p>
  </section>

  <!-- Services Section -->
  <section class="container my-5">
    <div class="row g-4">
      
      <!-- Oil Changing -->
      <div class="col-md-4">
        <div class="card shadow">
            <img src="assets/images/oil-change.jpg" class="card-img-top img-fluid" alt="Oil Changing" style="height: 300px; object-fit: cover;">

          <div class="card-body text-center">
            <h5 class="card-title">Oil Changing</h5>
            <p class="card-text">Ensure your engine runs smoothly with our premium oil change service.</p>
            <p class="text-danger fw-bold">$50</p>
            <a href="#" class="btn btn-danger request-button">Request Service</a>
          </div>
        </div>
      </div>
      
      <!-- Tire Changing -->
      <div class="col-md-4">
        <div class="card shadow">
            <img src="assets/images/tire-change.jpg" class="card-img-top img-fluid" alt="Oil Changing" style="height: 300px; object-fit: cover;">
          <div class="card-body text-center">
            <h5 class="card-title">Tire Changing</h5>
            <p class="card-text">Stay safe on the road with quick and efficient tire changing services.</p>
            <p class="text-danger fw-bold">$75</p>
            <a href="#" class="btn btn-danger request-button">Request Service</a>
          </div>
        </div>
      </div>
      
      <!-- Engine Repair -->
      <div class="col-md-4">
        <div class="card shadow">
          <img src="assets/images/engine-repair.jpg" class="card-img-top img-fluid" alt="Oil Changing" style="height: 300px; object-fit: cover;">
          <div class="card-body text-center">
            <h5 class="card-title">Engine Repair</h5>
            <p class="card-text">Restore your engine's performance with our expert repair solutions.</p>
            <p class="text-danger fw-bold">N/A</p>
            <a href="#" class="btn btn-danger request-button">Request Service</a>
          </div>
        </div>
      </div>
      
      <!-- Battery Repair -->
      <div class="col-md-4">
        <div class="card shadow">
            <img src="assets/images/battery-repair.jpg" class="card-img-top img-fluid" alt="Oil Changing" style="height: 324px; object-fit: cover;">
          <div class="card-body text-center">
            <h5 class="card-title">Battery Repair</h5>
            <p class="card-text">Ensure your car starts reliably with our battery repair service.</p>
            <p class="text-danger fw-bold">$80</p>
            <a href="#" class="btn btn-danger request-button">Request Service</a>
          </div>
        </div>
      </div>
      
      <!-- Steering Repair -->
      <div class="col-md-4">
        <div class="card shadow">
            <img src="assets/images/steering-repair.jpg" class="card-img-top img-fluid" alt="Oil Changing" style="height: 300px; object-fit: cover;">
          <div class="card-body text-center">
            <h5 class="card-title">Steering Repair</h5>
            <p class="card-text">Maintain control and safety with our expert steering repair services.</p>
            <p class="text-danger fw-bold">$150</p>
            <a href="#" class="btn btn-danger request-button">Request Service</a>
          </div>
        </div>
      </div>
      
      <!-- Brake Repair -->
      <div class="col-md-4">
        <div class="card shadow">
            <img src="assets/images/brake-repair.jpg" class="card-img-top img-fluid" alt="Oil Changing" style="height: 300px; object-fit: cover;">
          <div class="card-body text-center">
            <h5 class="card-title">name</h5>
            <p class="card-text">description</p>
            <p class="text-danger fw-bold">price</p>
            <a href="#" class="btn btn-danger request-button">Request Service</a>
          </div>
        </div>
      </div>
      
    </div>
  </section>

  <!-- Footer -->
  <footer class="text-center py-3">
    <p>&copy; 2024 GearUpGarage. All rights reserved.</p>
  </footer>



  <!-- Service Request Modal -->
<div class="modal fade" id="serviceRequestModal" tabindex="-1" aria-labelledby="serviceRequestModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      
      <!-- Modal Header -->
      <div class="modal-header">
        <h5 class="modal-title" id="serviceRequestModalLabel">Request Service</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>

      <!-- Modal Body -->
      <div class="modal-body">
        <form id="serviceRequestForm">

          <!-- Car Info Section -->
          <h6 class="fw-bold">Car Information</h6>
          <div class="mb-3">
            <label for="carModel" class="form-label">Model</label>
            <input type="text" class="form-control" id="carModel" placeholder="Enter your car model" required>
          </div>

          <div class="mb-3">
            <label for="carYear" class="form-label">Model Year</label>
            <select class="form-select" id="carYear" required>
              <option value="" disabled selected>Select the model year</option>
              <!-- Generate years dynamically -->
              <script>
                const yearDropdown = document.querySelector('#carYear');
                const currentYear = new Date().getFullYear();
                for (let year = currentYear; year >= 1980; year--) {
                  const option = document.createElement('option');
                  option.value = year;
                  option.textContent = year;
                  yearDropdown.appendChild(option);
                }
              </script>
            </select>
          </div>

          <div class="mb-3">
            <label for="carCondition" class="form-label">Car Condition</label>
            <select class="form-select" id="carCondition" required>
              <option value="" disabled selected>Select the condition</option>
              <option value="Good">Good</option>
              <option value="Bad">Bad</option>
              <option value="Not Working">Not Working</option>
            </select>
          </div>

          <hr class="my-4">

          <!-- Appointment Section -->
          <h6 id ="appointmentForm" class="fw-bold">Appointment Information</h6>
          <div class="mb-3">
            <label for="appointmentDate" class="form-label">Appointment Day</label>
            <input type="date" class="form-control" id="appointmentDate" min="" required>
          </div>
          <!-- Garage Selection -->
          <div class="mb-3">
            <label for="garage" class="form-label">Garage</label>
            <select class="form-select" id="garage" required>
              <option value="" disabled selected>Select a garage</option>
              <option value="1">Garage 1</option>
              <option value="2">Garage 2</option>
              <option value="3">Garage 3</option>
              <option value="4">Garage 4</option>
            </select>
          </div>
          <div class="mb-3">
            <label for="timeSlot" class="form-label">Time Slot</label>
            <select class="form-select" id="timeSlot" required>
              <option value="" disabled selected>Select a time slot</option>
              <option value="08:00 AM - 09:00 AM">08:00 AM - 09:00 AM</option>
              <option value="09:00 AM - 10:00 AM">09:00 AM - 10:00 AM</option>
              <option value="10:00 AM - 11:00 AM">10:00 AM - 11:00 AM</option>
              <option value="11:00 AM - 12:00 PM">11:00 AM - 12:00 PM</option>
              <option value="12:00 PM - 01:00 PM">12:00 PM - 01:00 PM</option>
              <option value="01:00 PM - 02:00 PM">01:00 PM - 02:00 PM</option>
              <option value="02:00 PM - 03:00 PM">02:00 PM - 03:00 PM</option>
              <option value="03:00 PM - 04:00 PM">03:00 PM - 04:00 PM</option>
              <option value="04:00 PM - 05:00 PM">04:00 PM - 05:00 PM</option>
              <option value="05:00 PM - 06:00 PM">05:00 PM - 06:00 PM</option>
              <option value="06:00 PM - 07:00 PM">06:00 PM - 07:00 PM</option>
            </select>
          </div>

          <div class="mb-3">
            <label  id="service-type" for="serviceType" class="form-label">Service Type</label>
            <input type="text" class="form-control" id="serviceType" readonly>
          </div>

        </form>
      </div>

      <!-- Modal Footer -->
      <div class="modal-footer d-flex justify-content-between">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
        <button type="submit" class="btn btn-danger" form="serviceRequestForm">Submit Request</button>
      </div>
    </div>
  </div>
</div>


<!-- Appointment Success Modal -->
<div class="modal fade booked-window" id="successModal" tabindex="-1" aria-labelledby="successModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">

      <!-- Modal Header -->
      <div class="modal-header bg-danger text-white justify-content-center">
        <h5 class="modal-title fw-bold" id="successModalLabel" style="font-size: 2rem;">Appointment Booked</h5>
        
      </div>

      <!-- Modal Body -->
      <div class="modal-body text-center">
        <i class="fas fa-check-circle text-danger" style="font-size: 4rem; margin-bottom: 15px;"></i>
        <p class="fw-bold text-white" style="font-size: 1.5rem;">Your appointment has been successfully booked!</p>
        <p class="text-muted">We look forward to serving you.</p>
      </div>

      <!-- Modal Footer -->
      <div class="modal-footer justify-content-center">
        <button type="button" class="btn btn-danger px-4" data-bs-dismiss="modal">OK</button>
      </div>
    </div>
  </div>
</div>


 





  <script>

const authButtons = document.getElementById('authButtons');
const user = JSON.parse(localStorage.getItem('user')); // Retrieve user info from localStorage

if (user) {
  // Render profile dropdown if the user is logged in
  authButtons.innerHTML = `
    <div class="dropdown">
      <button class="btn" type="button" id="uniqueProfileDropdown" data-bs-toggle="dropdown" aria-expanded="false" style="background: none; border: none; padding: 0;">
        <i class="fas fa-user-circle" style="font-size: 55px; color: white; cursor: pointer;"></i>
      </button>
      <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="uniqueProfileDropdown">
        <li><a class="dropdown-item" href="profile.html">View Profile</a></li>
        <li><hr class="dropdown-divider"></li>
        <li><button class="dropdown-item text-danger" id="logoutBtn">Logout</button></li>
      </ul>
    </div>
  `;

  // Add Logout functionality
  document.getElementById('logoutBtn').addEventListener('click', () => {
    localStorage.removeItem('user'); // Remove user data from localStorage
    window.location.href = 'login.html'; // Redirect to login page
  });
}




    const navLinks = document.querySelectorAll('.navbar-link');
    const currentUrl = window.location.href;
  
    navLinks.forEach(link => {
      if (currentUrl.includes(link.getAttribute('href'))) {
        link.classList.add('active');
      }
    });



  //Appointment Pop up
 
  document.querySelectorAll('.request-button').forEach((button) => {
  button.addEventListener('click', async (event) => {
    event.preventDefault();
    console.log('Request button clicked'); // Log when the button is clicked

    // Get the service type from the clicked button's closest card
    const serviceType = button.closest('.card').querySelector('.card-title').textContent;
    console.log('Service Type:', serviceType); // Log the service type

    // Populate time slots based on service type
    const timeSlot = document.getElementById('timeSlot'); // The time slot dropdown
    if (!timeSlot) {
      console.error('Time slot dropdown not found'); // Error if timeSlot dropdown is missing
      return;
    }

    if (
  serviceType === "Oil Changing" ||
  serviceType === "Tire Changing" ||
  serviceType === "Battery Repair"
) {
  console.log("Populating time slots for Oil/Tire/Battery services");
  timeSlot.innerHTML = `
    <option value="" disabled selected>Select a time slot</option>
    <option value="08:00 AM - 08:30 AM">08:00 AM - 08:30 AM</option>
    <option value="08:30 AM - 09:00 AM">08:30 AM - 09:00 AM</option>
    <option value="09:00 AM - 09:30 AM">09:00 AM - 09:30 AM</option>
    <option value="09:30 AM - 10:00 AM">09:30 AM - 10:00 AM</option>
    <option value="10:00 AM - 10:30 AM">10:00 AM - 10:30 AM</option>
    <option value="10:30 AM - 11:00 AM">10:30 AM - 11:00 AM</option>
    <option value="11:00 AM - 11:30 AM">11:00 AM - 11:30 AM</option>
    <option value="11:30 AM - 12:00 PM">11:30 AM - 12:00 PM</option>
    <option value="12:00 PM - 12:30 PM">12:00 PM - 12:30 PM</option>
    <option value="12:30 PM - 01:00 PM">12:30 PM - 01:00 PM</option>
    <option value="01:00 PM - 01:30 PM">01:00 PM - 01:30 PM</option>
    <option value="01:30 PM - 02:00 PM">01:30 PM - 02:00 PM</option>
    <option value="02:00 PM - 02:30 PM">02:00 PM - 02:30 PM</option>
    <option value="02:30 PM - 03:00 PM">02:30 PM - 03:00 PM</option>
    <option value="03:00 PM - 03:30 PM">03:00 PM - 03:30 PM</option>
    <option value="03:30 PM - 04:00 PM">03:30 PM - 04:00 PM</option>
    <option value="04:00 PM - 04:30 PM">04:00 PM - 04:30 PM</option>
    <option value="04:30 PM - 05:00 PM">04:30 PM - 05:00 PM</option>
    <option value="05:00 PM - 05:30 PM">05:00 PM - 05:30 PM</option>
    <option value="05:30 PM - 06:00 PM">05:30 PM - 06:00 PM</option>
    <option value="06:00 PM - 06:30 PM">06:00 PM - 06:30 PM</option>
    <option value="06:30 PM - 07:00 PM">06:30 PM - 07:00 PM</option>
  `;
} else if (
  serviceType === "Steering Repair" ||
  serviceType === "Tire Repair"
) {
  console.log("Populating 2-hour slots for Steering/Tire Repair");
  timeSlot.innerHTML = `
    <option value="" disabled selected>Select a time slot</option>
    <option value="08:00 AM - 10:00 AM">08:00 AM - 10:00 AM</option>
    <option value="10:00 AM - 12:00 PM">10:00 AM - 12:00 PM</option>
    <option value="12:00 PM - 02:00 PM">12:00 PM - 02:00 PM</option>
    <option value="02:00 PM - 04:00 PM">02:00 PM - 04:00 PM</option>
    <option value="04:00 PM - 06:00 PM">04:00 PM - 06:00 PM</option>
    <option value="06:00 PM - 07:00 PM">06:00 PM - 07:00 PM</option>
  `;
} else if (serviceType === "Engine Repair") {
  console.log("Populating Full-Day slot for Engine Repair");
  timeSlot.innerHTML = `
    <option value="" disabled selected>Select a time slot</option>
    <option value="Full Day">Full Day (08:00 AM - 07:00 PM)</option>
  `;
}

   
    document.getElementById('serviceType').value = serviceType;

    // Show the service request modal
    const serviceModal = new bootstrap.Modal(document.getElementById('serviceRequestModal'));
    serviceModal.show();
  



    

  // minimum appointment date
  const appointmentDateInput = document.getElementById('appointmentDate');
  const today = new Date().toISOString().split('T')[0];
  appointmentDateInput.setAttribute('min', today);
});
});



// Routes -----------------------------------------------------------------------------------------------------------------
// Sending appointment detail to backend

document.getElementById('serviceRequestForm').addEventListener('submit', async (event) => {
  event.preventDefault();

  const user = JSON.parse(localStorage.getItem('user'));
  if (!user) {
    alert('You need to log in to book an appointment!');
    window.location.href = 'login.html';
    return;
  }

  const formData = {
    carModel: document.getElementById('carModel').value,
    modelYear: document.getElementById('carYear').value,
    carCondition: document.getElementById('carCondition').value,
    appointmentDay: document.getElementById('appointmentDate').value,
    timeSlot: document.getElementById('timeSlot').value,
    garage: document.getElementById('garage').value,
    serviceType: document.getElementById('serviceType').value,
    userId: JSON.parse(localStorage.getItem('user')).userId,
  };

  try {
    const response = await fetch('http://127.0.0.1:5000/api/appointments', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify(formData)
    });

    const data = await response.json();

    if (response.ok) {
      const successModal = new bootstrap.Modal(document.getElementById('successModal'));
      successModal.show();
      clearForm();
    } else {
      alert(`Error: ${data.error}`);
    }
  } catch (error) {
    console.error('Error booking appointment:', error);
    alert('An error occurred. Please try again.');
  }
  
});
function clearForm() {
  const form = document.getElementById('serviceRequestForm');
  Array.from(form.elements).forEach((element) => {
    if (element.id !== 'serviceType' && element.type !== 'hidden') {
      element.value = ''; // Clear the value
    }
  });

  // Reset dropdowns to their default state
  document.getElementById('garage').selectedIndex = 0;
  document.getElementById('timeSlot').selectedIndex = 0;
  document.getElementById('carCondition').selectedIndex = 0;
  document.getElementById('carYear').selectedIndex = 0;

  // Keep the serviceType field value intact
  const serviceType = document.getElementById('serviceType');
  console.log(`Retained service type: ${serviceType.value}`);
}



  // Fetch booked slots from the backend
// Get form elements
const appointmentDateInput = document.getElementById('appointmentDate');
const garageInput = document.getElementById('garage');
const timeSlotDropdown = document.getElementById('timeSlot');

// Function to fetch booked time slots
const fetchBookedSlots = async () => {
  const appointmentDate = appointmentDateInput.value;
  const garage = garageInput.value;

  // Ensure both appointmentDate and garage are filled
  if (!appointmentDate || !garage) return;

  try {
    console.log('Fetching booked time slots...');
    const response = await fetch(`http://127.0.0.1:5000/api/booked-time-slots?appointmentDate=${appointmentDate}&garage=${garage}`);
    if (!response.ok) throw new Error('Failed to fetch booked time slots');

    const bookedSlots = await response.json();

    // Iterate through the timeSlot dropdown and hide booked slots
    Array.from(timeSlotDropdown.options).forEach((option) => {
      if (bookedSlots.includes(option.value)) {
        option.style.display = 'none'; // Hide booked slot
      } else {
        option.style.display = ''; // Reset display for unbooked slots
      }
    });
  } catch (error) {
    console.error('Error fetching booked time slots:', error);
    alert('Failed to update time slots. Please try again.');
  }
};

// Add event listeners
appointmentDateInput.addEventListener('change', fetchBookedSlots);
garageInput.addEventListener('change', fetchBookedSlots);








async function fetchServices() {
  try {
    // Fetch services from the backend
    const response = await fetch('http://127.0.0.1:5000/api/services');
    if (!response.ok) throw new Error('Failed to fetch services');

    const services = await response.json(); // Parse the JSON response

    // Find the container where services will be displayed
    const servicesContainer = document.querySelector('.row.g-4');
    servicesContainer.innerHTML = ''; // Clear existing content

    // Generate the HTML for each service
    let htmlContent = '';
    services.forEach(service => {
      const priceText = service.price !== null ? `$${service.price}` : 'N/A';
      let imagePath = ""; // Initialize the imagePath variable

          // Conditional statements for each service type
          if (service.service_name === "Oil Changing") {
            imagePath = "assets/images/oil-change.jpg";
          } else if (service.service_name === "Tire Changing") {
            imagePath = "assets/images/tire-change.jpg";
          } else if (service.service_name === "Battery Repair") {
            imagePath = "assets/images/battery-repair.jpg";
          } else if (service.service_name === "Engine Repair") {
            imagePath = "assets/images/engine-repair.jpg";
          } else if (service.service_name === "Steering Repair") {
            imagePath = "assets/images/steering-repair.jpg";
          } else if (service.service_name === "Brake Repair") {
            imagePath = "assets/images/brake-repair.jpg";
          }
      htmlContent += `
        <div class="col-md-4">
          <div class="card shadow">
            <img src="${imagePath}" class="card-img-top img-fluid" alt="${service.service_name}" style="height: 300px; object-fit: cover;">
            <div class="card-body text-center">
              <h5 class="card-title">${service.service_name}</h5>
              <p class="card-text">${service.description}</p>
              <p class="text-danger fw-bold">${priceText}</p>
              <a href="#" class="btn btn-danger request-button">Request Service</a>
            </div>
          </div>
        </div>
      `;
    });

    // Update the container with the generated HTML
    servicesContainer.innerHTML = htmlContent;

    // Attach event listeners to the request buttons
    attachRequestButtonListeners();
  } catch (error) {
    console.error('Error fetching services:', error);
    alert('Failed to load services. Please try again.');
  }
}

function attachRequestButtonListeners() {
  document.querySelectorAll('.request-button').forEach((button) => {
    button.addEventListener('click', async (event) => {
      event.preventDefault();

      console.log('Request button clicked'); // Log when the button is clicked

      // Get the service type from the clicked button's closest card
      const serviceType = button.closest('.card').querySelector('.card-title').textContent;
      console.log('Service Type:', serviceType); // Log the service type

      // Populate time slots based on service type
      const timeSlot = document.getElementById('timeSlot'); // The time slot dropdown
      if (!timeSlot) {
        console.error('Time slot dropdown not found'); // Error if timeSlot dropdown is missing
        return;
      }

      if (["Oil Changing", "Tire Changing", "Battery Repair"].includes(serviceType)) {
        timeSlot.innerHTML = `
           <option value="" disabled selected>Select a time slot</option>
          <option value="08:00 AM - 08:30 AM">08:00 AM - 08:30 AM</option>
          <option value="08:30 AM - 09:00 AM">08:30 AM - 09:00 AM</option>
          <option value="09:00 AM - 09:30 AM">09:00 AM - 09:30 AM</option>
          <option value="09:30 AM - 10:00 AM">09:30 AM - 10:00 AM</option>
          <option value="10:00 AM - 10:30 AM">10:00 AM - 10:30 AM</option>
          <option value="10:30 AM - 11:00 AM">10:30 AM - 11:00 AM</option>
          <option value="11:00 AM - 11:30 AM">11:00 AM - 11:30 AM</option>
          <option value="11:30 AM - 12:00 PM">11:30 AM - 12:00 PM</option>
          <option value="12:00 PM - 12:30 PM">12:00 PM - 12:30 PM</option>
          <option value="12:30 PM - 01:00 PM">12:30 PM - 01:00 PM</option>
          <option value="01:00 PM - 01:30 PM">01:00 PM - 01:30 PM</option>
          <option value="01:30 PM - 02:00 PM">01:30 PM - 02:00 PM</option>
          <option value="02:00 PM - 02:30 PM">02:00 PM - 02:30 PM</option>
          <option value="02:30 PM - 03:00 PM">02:30 PM - 03:00 PM</option>
          <option value="03:00 PM - 03:30 PM">03:00 PM - 03:30 PM</option>
          <option value="03:30 PM - 04:00 PM">03:30 PM - 04:00 PM</option>
          <option value="04:00 PM - 04:30 PM">04:00 PM - 04:30 PM</option>
          <option value="04:30 PM - 05:00 PM">04:30 PM - 05:00 PM</option>
          <option value="05:00 PM - 05:30 PM">05:00 PM - 05:30 PM</option>
          <option value="05:30 PM - 06:00 PM">05:30 PM - 06:00 PM</option>
          <option value="06:00 PM - 06:30 PM">06:00 PM - 06:30 PM</option>
          <option value="06:30 PM - 07:00 PM">06:30 PM - 07:00 PM</option>
        `;
      } else if (["Steering Repair", "Tire Repair"].includes(serviceType)) {
        timeSlot.innerHTML = `
         <option value="" disabled selected>Select a time slot</option>
        <option value="08:00 AM - 10:00 AM">08:00 AM - 10:00 AM</option>
        <option value="10:00 AM - 12:00 PM">10:00 AM - 12:00 PM</option>
        <option value="12:00 PM - 02:00 PM">12:00 PM - 02:00 PM</option>
        <option value="02:00 PM - 04:00 PM">02:00 PM - 04:00 PM</option>
        <option value="04:00 PM - 06:00 PM">04:00 PM - 06:00 PM</option>
        <option value="06:00 PM - 07:00 PM">06:00 PM - 07:00 PM</option>
        `;
      } else if (serviceType === "Engine Repair") {
        timeSlot.innerHTML = `
          <option value="" disabled selected>Select a time slot</option>
          <option value="Full Day">Full Day (08:00 AM - 07:00 PM)</option>
        `;
      }

      // Populate the service type in the modal
      document.getElementById('serviceType').value = serviceType;

      // Show the service request modal
      const serviceModal = new bootstrap.Modal(document.getElementById('serviceRequestModal'));
      serviceModal.show();

      // Set minimum appointment date
      const appointmentDateInput = document.getElementById('appointmentDate');
      const today = new Date().toISOString().split('T')[0];
      appointmentDateInput.setAttribute('min', today);
    });
  });
}

document.addEventListener('DOMContentLoaded', fetchServices);


  </script>
</body>

</html>